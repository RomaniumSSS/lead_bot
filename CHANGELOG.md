# Changelog

–í—Å–µ –∑–Ω–∞—á–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ.

–§–æ—Ä–º–∞—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/).

---

## [Unreleased]

### Added (23.12.2025) ‚Äî –ü–ª–∞–Ω 001: LLM-—É–ª—É—á—à–µ–Ω–∏—è (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 + 2)

#### üéØ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ (–§–∞–∑–∞ 1.1)
- **–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è**: `generate_suggested_questions(lead: Lead)` –≤ `src/services/llm.py`
  - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 3-4 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ª–∏–¥–∞ —á–µ—Ä–µ–∑ Claude API
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç prompt caching –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –¥–æ 90% —Ç–æ–∫–µ–Ω–æ–≤
  - Fallback –Ω–∞ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–∏ –æ—à–∏–±–∫–µ LLM

- **–ù–æ–≤–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞**: `get_suggested_questions_keyboard(questions: list[str])`
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã —Å —ç–º–æ–¥–∑–∏ (üìãüí∞üé®‚è∞)
  - –ö–Ω–æ–ø–∫–∞ "‚úçÔ∏è –°–≤–æ–π –≤–æ–ø—Ä–æ—Å" –¥–ª—è —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤–≤–æ–¥–∞

- **–ù–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫**: `handle_question_callback()` –≤ `src/handlers/conversation.py`
  - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–æ–ø—Ä–æ—Å –∫–∞–∫ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ LLM

- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ö–Ω–æ–ø–∫–∞ "–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å" —Ç–µ–ø–µ—Ä—å:
  1. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ì–µ–Ω–µ—Ä–∏—Ä—É—é –≤–æ–ø—Ä–æ—Å—ã..."
  2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–æ–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ Claude
  3. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç inline-–∫–Ω–æ–ø–∫–∏ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏

#### üß† –£–º–Ω–æ–µ —Ä–µ–∑—é–º–µ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ (–§–∞–∑–∞ 3.2)
- **–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è**: `generate_lead_summary(lead: Lead)` –≤ `src/services/llm.py`
  - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –¥–∏–∞–ª–æ–≥–∞ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –¥–æ 150 —Å–∏–º–≤–æ–ª–æ–≤)
  - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π + —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç prompt caching
  - Fallback –Ω–∞ –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ–∑—é–º–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ

- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: `notify_owner_about_lead()` –≤ `src/services/notifier.py`
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü—É —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∞—Ç —É–º–Ω–æ–µ —Ä–µ–∑—é–º–µ –æ—Ç LLM
  - –§–æ—Ä–º–∞—Ç: "üìù **–†–µ–∑—é–º–µ:** [LLM-—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç]"
  - Graceful fallback –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

#### üìã –ú–∞–Ω—É–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–§–∞–∑–∞ 2.1)
- **–ù–æ–≤—ã–π —Ñ–∞–π–ª**: `tests/manual_test_guide.md`
  - 9 –¥–µ—Ç–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
  - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∏ –∑–∞–ø—É—Å–∫—É
  - –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
  - –®–∞–±–ª–æ–Ω –æ—Ç—á—ë—Ç–∞ –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

#### üé® –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è (–§–∞–∑–∞ 3.1)
- **–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è**: `generate_greeting(lead: Lead)` –≤ `src/services/llm.py`
  - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫ –∏ –∏–º–µ–Ω–∏
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Claude Haiku (–¥–µ—à–µ–≤–ª–µ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á)
  - –£—á–∏—Ç—ã–≤–∞–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ª–∏ –∫–ª–∏–µ–Ω—Ç
  - Fallback –Ω–∞ –ø—Ä–æ—Å—Ç–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ

- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: `/start` handler —Ç–µ–ø–µ—Ä—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ LLM
  - "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, –ò–≤–∞–Ω! üëã –†–∞–¥ –ø–æ–º–æ—á—å!"
  - "–ü—Ä–∏–≤–µ—Ç, –ú–∞—Ä–∏—è! –°–Ω–æ–≤–∞ —Ä–∞–¥ –≤–∏–¥–µ—Ç—å. –ß–µ–º –ø–æ–º–æ—á—å?"

#### üí¨ Follow-up —Å–æ–æ–±—â–µ–Ω–∏—è (–§–∞–∑–∞ 3.4)
- **–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è**: `generate_followup_message(lead: Lead, days_since_last: int)`
  - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º—è–≥–∫–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –¥–ª—è –ª–∏–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –æ—Ç–≤–µ—á–∞–ª–∏
  - –£—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç (–∑–∞–¥–∞—á–∞, –±—é–¥–∂–µ—Ç, —Å—Ç–∞—Ç—É—Å)
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Claude Haiku
  - Fallback –Ω–∞ –ø—Ä–æ—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  - **–ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** —Å scheduler (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)

#### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `MODEL_HAIKU` –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –Ω–∞ –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á–∞—Ö
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `notify_owner_about_lead()` –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (PLR0912)
- –í—ã–Ω–µ—Å–µ–Ω—ã –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
  - `_get_status_emoji_and_text()`
  - `_get_fallback_summary_from_lead()`
  - `_get_fallback_questions()`
  - `_get_fallback_greeting()`
  - `_get_fallback_followup()`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ—à–∏–±–∫–∏ –ª–∏–Ω—Ç–µ—Ä–∞ (Ruff) –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ (MyPy)
- –î–æ–±–∞–≤–ª–µ–Ω—ã AICODE-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –±—É–¥—É—â–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π

### Changed
- –ö–Ω–æ–ø–∫–∞ "–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å" —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ FREE_CHAT
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü—É —Å—Ç–∞–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–µ–µ –±–ª–∞–≥–æ–¥–∞—Ä—è LLM-—Ä–µ–∑—é–º–µ
- –ö–æ–º–∞–Ω–¥–∞ `/start` —Ç–µ–ø–µ—Ä—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ LLM

### Technical Details
- **–ù–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π**: 4 (generate_suggested_questions, generate_lead_summary, generate_greeting, generate_followup_message)
- **–ù–æ–≤—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**: 1 (handle_question_callback)
- **–ù–æ–≤—ã—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä**: 1 (get_suggested_questions_keyboard)
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~600 –¥–æ–±–∞–≤–ª–µ–Ω–æ
- **–¢–µ—Å—Ç—ã**: 12/12 –ø—Ä–æ–π–¥–µ–Ω–æ, 0 —Ä–µ–≥—Ä–µ—Å—Å–∏–π
- **–ö–∞—á–µ—Å—Ç–≤–æ**: Ruff ‚úÖ, MyPy ‚úÖ
- **–ú–æ–¥–µ–ª–∏**: Claude Sonnet 4.5 (–¥–∏–∞–ª–æ–≥–∏), Claude Haiku 4 (–ø—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏)

---

## [0.1.0] - 2025-12-22 (Initial MVP)

### Added
- –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (aiogram 3.x + Tortoise ORM + PostgreSQL)
- FSM-–¥–∏–∞–ª–æ–≥ —Å –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –ª–∏–¥–æ–≤ (–∑–∞–¥–∞—á–∞ ‚Üí –±—é–¥–∂–µ—Ç ‚Üí —Å—Ä–æ–∫)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Claude API –¥–ª—è —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≤—Å—Ç—Ä–µ—á —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ LLM
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü—É –æ –≥–æ—Ä—è—á–∏—Ö –∏ —Ç—ë–ø–ª—ã—Ö –ª–∏–¥–∞—Ö
- –ê–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã (/stats, /leads)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –º–æ–¥–µ–ª–µ–π –∏ —Ç–∏–ø–æ–≤
- Docker Compose –¥–ª—è –ë–î
- Makefile –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### Models
- `Lead` ‚Äî –º–æ–¥–µ–ª—å –ª–∏–¥–∞ —Å –ø–æ–ª—è–º–∏: telegram_id, status, task, budget, deadline
- `Conversation` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ (user/assistant messages)
- `Meeting` ‚Äî –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏

### Handlers
- `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –Ω–∞—á–∞–ª–æ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `/restart` ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –¥–∏–∞–ª–æ–≥–∞
- `/stats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è OWNER_TELEGRAM_ID)
- Callback handlers –¥–ª—è –∫–Ω–æ–ø–æ–∫ (task, budget, deadline, action)
- FREE_CHAT handler –¥–ª—è —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞ —á–µ—Ä–µ–∑ LLM

### LLM Integration
- `generate_response_free_chat()` ‚Äî –æ—Ç–≤–µ—Ç—ã –≤ —Å–≤–æ–±–æ–¥–Ω–æ–º –¥–∏–∞–ª–æ–≥–µ
- `parse_custom_meeting_time()` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –≤—Ä–µ–º–µ–Ω–∏ –≤—Å—Ç—Ä–µ—á–∏
- Prompt caching –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤

---

## –õ–µ–≥–µ–Ω–¥–∞

- **Added** ‚Äî –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **Changed** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **Deprecated** ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–∫–æ—Ä–æ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã
- **Removed** ‚Äî —É–¥–∞–ª—ë–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **Fixed** ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤
- **Security** ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
